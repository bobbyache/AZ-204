How does a system-assigned managed identity work with an Azure virtual machine?	Azure Resource Manager creates a service principal in Azure Active Directory for the identity of the virtual machine.
What happens after the creation of the service principal for a system-assigned managed identity?	Azure Resource Manager configures the identity on the virtual machine by updating the Azure Instance Metadata Service identity endpoint with the service principal client ID and certificate.
What should you do after the virtual machine has an identity to grant it access to Azure resources?	Use the service principal information to assign the appropriate role to the virtual machine service principal in Azure Active Directory.
How can your code running on the virtual machine obtain an access token for Azure resources?	Your code can request a token from the Azure Instance Metadata service endpoint: http://169.254.169.254/metadata/identity/oauth2/token
What does Azure Active Directory return when a call is made to request an access token?	Azure Active Directory returns a JSON Web Token (JWT) access token.
What should your code do with the access token obtained from Azure Active Directory?	Your code should send the access token on a call to a service that supports Azure Active Directory authentication.
How does a user-assigned managed identity work with an Azure virtual machine?	Azure Resource Manager creates a service principal in Azure Active Directory for the user-assigned managed identity.
What happens after the creation of the service principal for a user-assigned managed identity?	Azure Resource Manager updates the Azure Instance Metadata Service identity endpoint with the user-assigned managed identity service principal client ID and certificate.
What should you do after configuring a user-assigned managed identity on a virtual machine to grant it access to Azure resources?	Use role-based access control in Azure Active Directory to assign the appropriate role to the service principal of the user-assigned identity.
How can your code running on a virtual machine with a user-assigned managed identity obtain an access token for Azure resources?	Your code can request a token from the Azure Instance Metadata Service identity endpoint: http://169.254.169.254/metadata/identity/oauth2/token
